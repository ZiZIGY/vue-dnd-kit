<script setup lang="ts">
  import { ref } from 'vue';

  import DnDProvider from './external/components/DnDProvider.vue';
  import Draggable from './internal/components/Draggable.vue';
  import SelectionArea from './internal/components/SelectionArea.vue';
  import AxisBox from './internal/components/AxisBox.vue';

  const test = ref([1, 2, 3, 4, 5, 6, 7]);
</script>

<template>
  <DnDProvider>
    <!-- Drag Handle Example -->
    <div class="example-section">
      <h3>Drag Handle (—Ç–æ–ª—å–∫–æ –∑–∞ üî•)</h3>
      <SelectionArea>
        <Draggable 
          :index="200" 
          drag-handle=".handle"
          class="card"
        >
          <div class="handle">üî• Drag Handle</div>
          <div class="content">–ú–æ–∂–Ω–æ –¥—Ä–∞–≥–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞ —ç–º–æ–¥–∑–∏ –≤—ã—à–µ</div>
        </Draggable>
      </SelectionArea>
    </div>

    <!-- Distance Activation Example -->
    <div class="example-section">
      <h3>Distance Activation (—Å–¥–≤–∏–Ω—å –Ω–∞ 30px) - —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º</h3>
      <SelectionArea>
        <Draggable 
          :index="201"
          :activation="{ distance: 30 }"
          :show-progress="true"
          class="card"
        >
          –°–¥–≤–∏–Ω—å –º–µ–Ω—è –Ω–∞ 30px —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥—Ä–∞–≥
        </Draggable>
      </SelectionArea>
    </div>

    <!-- Delay Activation Example -->
    <div class="example-section">
      <h3>Delay Activation (–¥–µ—Ä–∂–∏ 0.5s) - —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º</h3>
      <SelectionArea>
        <Draggable 
          :index="202"
          :activation="{ delay: 0.5 }"
          :show-progress="true"
          class="card"
        >
          –î–µ—Ä–∂–∏ –º–µ–Ω—è 0.5 —Å–µ–∫—É–Ω–¥—ã —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥—Ä–∞–≥
        </Draggable>
      </SelectionArea>
    </div>

    <!-- Combined Activation (both distance AND delay must be met) -->
    <div class="example-section">
      <h3>Combined (—Å–¥–≤–∏–Ω—å 20px + –¥–µ—Ä–∂–∏ 0.3s) - —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º</h3>
      <SelectionArea>
        <Draggable 
          :index="203"
          :activation="{ distance: 20, delay: 0.3 }"
          :show-progress="true"
          class="card"
        >
          –°–Ω–∞—á–∞–ª–∞ —Å–¥–≤–∏–Ω—å –Ω–∞ 20px, –ø–æ—Ç–æ–º –¥–µ—Ä–∂–∏ 0.3s
        </Draggable>
      </SelectionArea>
    </div>

    <!-- Groups Example (Ctrl+Click - –≤—ã–¥–µ–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ board) -->
    <div class="example-section">
      <h3>Groups (—Ç–æ–ª—å–∫–æ board –≤—ã–¥–µ–ª—è–µ—Ç—Å—è, Ctrl+Click)</h3>
      <SelectionArea :groups="['board']">
        <Draggable :index="300" :groups="['board']" class="card">
          üéØ board –∫–∞—Ä—Ç–æ—á–∫–∞
        </Draggable>
        <Draggable :index="301" :groups="['board']" class="card">
          üéØ board –∫–∞—Ä—Ç–æ—á–∫–∞
        </Draggable>
        <Draggable :index="302" :groups="['sidebar']" class="card">
          üìå sidebar (–Ω–µ –≤—ã–¥–µ–ª–∏—Ç—Å—è)
        </Draggable>
        <Draggable :index="303" :groups="['sidebar']" class="card">
          üìå sidebar (–Ω–µ –≤—ã–¥–µ–ª–∏—Ç—Å—è)
        </Draggable>
      </SelectionArea>
    </div>

    <!-- –ü—Ä–∏–º–µ—Ä —Å BoundingBox - —Ç–æ–ª—å–∫–æ –ø–æ X -->
    <AxisBox axis="x" class="bounding-box-example horizontal">
      <h3>–¢–æ–ª—å–∫–æ –ø–æ X</h3>
      <SelectionArea>
        <Draggable :index="100">
          –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –¥—Ä–∞–≥
        </Draggable>
      </SelectionArea>
    </AxisBox>

    <!-- –ü—Ä–∏–º–µ—Ä —Å BoundingBox - —Ç–æ–ª—å–∫–æ –ø–æ Y -->
    <AxisBox axis="y" class="bounding-box-example vertical">
      <h3>–¢–æ–ª—å–∫–æ –ø–æ Y</h3>
      <SelectionArea>
        <Draggable :index="101">
          –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –¥—Ä–∞–≥
        </Draggable>
      </SelectionArea>
    </AxisBox>


    <AxisBox axis="both" :restrict-to-area="true" class="bounding-box-example both">
      <h3>–û–±–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º)</h3>
      <SelectionArea>
        <Draggable
          v-for="(value, index) in test"
          :key="value"
          :index="value"
        >
          –î—Ä–∞–≥–≥–∞–±–ª - value: {{ value }}: index: {{ index }}
          <button @click="test.splice(index, 1)">–£–¥–∞–ª–∏—Ç—å</button>
        </Draggable>
      </SelectionArea>
    </AxisBox>

    <button @click="test.push(test.length)">–î–æ–±–∞–≤–∏—Ç—å</button>
  </DnDProvider>
</template>

<style>
  .dnd-provider {
    min-height: 100svh;
  }

  .example-section {
    margin: 20px;
    padding: 20px;
    border-radius: 8px;
  }

  .example-section h3 {
    margin: 0 0 15px 0;
    color: #333;
  }

  .card {
    padding: 15px;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    cursor: move;
    max-width: 400px;
  }

  .handle {
    padding: 10px;
    background: #ff6b6b;
    color: white;
    border-radius: 4px;
    margin-bottom: 10px;
    cursor: grab;
    text-align: center;
    font-weight: bold;
  }

  .content {
    color: #666;
  }
  
  .selection-area {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    padding: 20px;
  }
  
  .bounding-box-example {
    margin: 20px;
    padding: 10px;
    border: 2px dashed #666;
    border-radius: 8px;
  }
  
  .bounding-box-example.horizontal {
    width: 500px;
    height: 100px;
    border-color: #e74c3c;
  }
  
  .bounding-box-example.vertical {
    width: 200px;
    height: 300px;
    border-color: #3498db;
  }
  
  .bounding-box-example.both {
    width: 600px;
    height: 400px;
    border-color: #2ecc71;
  }
  
  .bounding-box-example h3 {
    margin: 0 0 10px 0;
    font-size: 14px;
    color: #666;
  }
</style>
